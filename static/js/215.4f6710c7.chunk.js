/*! For license information please see 215.4f6710c7.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkdate=self.webpackChunkdate||[]).push([[215],{8167:function(e,n,t){t.d(n,{aC:function(){return r.aC},nw:function(){return r.nw}});var r=t(4510)},7215:function(e,n,t){t.r(n),t.d(n,{default:function(){return ae}});var r=t(4942),a=t(4165),i=t(1413),u=t(2982),o=t(5861),c=t(885),s=t(2791),l=t(8267),f=t(8182),v=t(1614),d=t(4554),h=t(7621),m=t(6151),p=t(3543),Z=t(4070),x=t(276),g=t(2481),y=t(5515),b=t(9398),_=t(6249),j=t(7686),w=t(8163),k=t(8167),C=t(8562),S=t(5107),N=t(5699),P=t(1652),D=t(556),E=t(7427),M=t(5095),Y=t.n(M),A=t(9603),L=t(2426),R=t.n(L),W=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var t,r,i,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n,{method:"GET"});case 3:return t=e.sent,e.next=6,t.json();case 6:return r=e.sent,(i={}).data=r,e.abrupt("return",i);case 12:return e.prev=12,e.t0=e.catch(0),u=e.t0||"Something went wrong",e.abrupt("return",{error:{message:u}});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(n){return e.apply(this,arguments)}}(),z="style_root__ik7zY",I="style_text__J-Ilu",J="style_activeCard__V8y43",O="style_imgWrapper__V2Ma9",T="style_textField__0EwNc",U="style_textArea__6YN7P",V="style_avatar__x8nM4",F="style_load__pxEUi",G="style_name__gWGQ7",B="style_subTitle__f5ZIU",H="style_helpAvatar__8G72h",K="style_dateWrapper__V2+m+",Q="style_hideDate__BRPrJ",$="style_dateFormat__ifkKG",q="style_error__8T0SS",X=t(184),ee=Y()((function(e){e()}),50);R().updateLocale("en",{week:{dow:1}});var ne=function(e){var n=e.state,t=e.setState,u=(0,s.useState)([]),l=(0,c.Z)(u,2),v=l[0],h=l[1],m=(0,s.useState)(!0),p=(0,c.Z)(m,2),Z=p[0],x=p[1],g=(0,s.useRef)(null),y=function(e,n){t((function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,r.Z)({},e,n))}))},b=function(e){h([]);var n=function(){var n=(0,o.Z)((0,a.Z)().mark((function n(){var t,r;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,W("https://restcountries.com/v3.1/name/".concat(e));case 4:r=n.sent,h(null===(t=r.data||[])||void 0===t?void 0:t.map((function(e){var n=e.flag,t=e.name;t.common;return{flag:n,name:t.official}})));case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();ee((function(){n()})),y("country",e)};return(0,s.useEffect)((function(){var e,t;n.birthday||x(!0);var r=function(){n.birthday||x(!0)},a=function(){return x(!1)};return null===(e=g.current)||void 0===e||e.addEventListener("focus",a),null===(t=g.current)||void 0===t||t.addEventListener("blur",r),function(){var e,n;null===(e=g.current)||void 0===e||e.removeEventListener("focus",a),null===(n=g.current)||void 0===n||n.removeEventListener("blur",r)}}),[n.birthday]),(0,X.jsxs)(d.Z,{className:T,children:[(0,X.jsx)(S.Z,{label:"Name",variant:"outlined",value:n.name,onChange:function(e){var n=e.target;y("name",n.value)},error:!n.name}),(0,X.jsxs)("div",{className:(0,f.Z)(K,Z&&Q,!n.birthday&&q),children:[(0,X.jsx)(P._,{dateAdapter:D.Q,children:(0,X.jsx)(E.M,{format:"DD/MM/YYYY",onChange:function(e){var n=e.valueOf();y("birthday",n)},inputRef:g})}),Z&&(0,X.jsx)("div",{className:$,children:(0,X.jsx)("span",{children:n.birthday?(0,A.ZP)(n.birthday,"dd/mm/yyyy"):"DD/MM/YYYY"})})]}),(0,X.jsx)(S.Z,{label:"Height (cm)",variant:"outlined",onChange:function(e){var n=e.target;y("height",n.value)},value:n.height}),(0,X.jsx)(S.Z,{label:"Weight (kg)",variant:"outlined",onChange:function(e){var n=e.target;y("weight",n.value)},value:n.weight}),(0,X.jsx)(S.Z,{label:"Children",type:"number",variant:"outlined",value:n.children,defaultValue:n.children,onChange:function(e){var n=e.target,t=Number(n.value);y("children",Math.max(0,t))}}),(0,X.jsx)(N.Z,{freeSolo:!0,options:["Single","Married","Divorced","Widowed"],onChange:function(e){var n=e.target,t=(null===n||void 0===n?void 0:n.innerText)||"";y("marital",t)},onBlur:function(e){var n=e.target,t=(null===n||void 0===n?void 0:n.value)||"";y("marital",t)},renderInput:function(e){return(0,X.jsx)(S.Z,(0,i.Z)((0,i.Z)({},e),{},{label:"Marital Status",variant:"outlined"}))},value:n.marital}),(0,X.jsx)(S.Z,{label:"Job",variant:"outlined",onChange:function(e){var n=e.target;y("job",n.value)},value:n.job}),(0,X.jsx)(N.Z,{freeSolo:!0,open:!!v.length,options:v.map((function(e){var n=e.flag,t=e.name;return"".concat(n," ").concat(t)})),onChange:function(e){var n=e.target,t=(null===n||void 0===n?void 0:n.innerText)||"";b(t)},onBlur:function(e){var n=e.target,t=(null===n||void 0===n?void 0:n.value)||"";b(t)},renderInput:function(e){return(0,X.jsx)(S.Z,(0,i.Z)((0,i.Z)({},e),{},{label:"Country",variant:"outlined",onChange:function(e){var n=e.target;b(n.value)}}))},value:n.country}),(0,X.jsx)("textarea",{className:(0,f.Z)(U,"form-control"),placeholder:"Other",value:n.etc,onChange:function(e){var n=e.target;y("etc",n.value)}}),(0,X.jsx)(S.Z,{label:"City",variant:"outlined",value:n.city,onChange:function(e){var n=e.target;y("city",n.value)}})]})},te=/\.[0-9a-z]+$/i,re=function(){var e=(0,s.useRef)(null),n=(0,C.hI)().page,t=n.path.substring(1).split("/"),S=(0,c.Z)(t,2),N=S[0],P=S[1],D="edit"===N,E=(0,k.nw)(),M=E.setProfiles,Y=E.profiles,A=E.loading,L=(0,s.useRef)("0"),R=(0,s.useRef)({name:"",photo:""}),W=(0,s.useState)([]),T=(0,c.Z)(W,2),U=T[0],K=T[1],Q=(0,s.useState)([]),$=(0,c.Z)(Q,2),q=$[0],ee=$[1],re=(0,s.useState)({name:"",birthday:0,children:0,marital:"",job:"",country:"",city:"",height:"",weight:"",etc:""}),ae=(0,c.Z)(re,2),ie=ae[0],ue=ae[1],oe=(0,s.useState)(!1),ce=(0,c.Z)(oe,2),se=ce[0],le=ce[1],fe=(0,s.useState)(!1),ve=(0,c.Z)(fe,2),de=ve[0],he=ve[1],me=(0,s.useState)(!1),pe=(0,c.Z)(me,2),Ze=pe[0],xe=pe[1],ge=(0,s.useState)(""),ye=(0,c.Z)(ge,2),be=ye[0],_e=ye[1],je=function(n){if(e.current){var t=e.current.classList;n?t.add(J):t.remove(J)}},we=function(){var e;R.current={name:ie.name,photo:null===(e=U[0])||void 0===e?void 0:e.link},K([]),ee([]),ue({name:"",birthday:0,children:0,marital:"",job:"",country:"",city:"",height:"",weight:"",etc:""}),L.current=(""+Date.now()).substring(4)},ke=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,c,s,l,f,v,d,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(le(!0),e.prev=1,!U.length){e.next=23;break}return t=U.filter((function(e){return!!e.file})),c=t.map((function(e,n){var t=e.file.name.match(te);if(!t)return null;var r="".concat(L.current,"/").concat(n).concat(t[0]);return{ref:(0,x.iH)(_.hu,r),name:r}})),e.next=7,Promise.all(c.map((function(e,n){if(!e)return new Promise((function(e){return e(null)}));var t=U[n];return(0,x.KV)(e.ref,t.file)})));case 7:return s=e.sent,l=[].concat((0,u.Z)(U.filter((function(e){return!e.file&&e.name})).map((function(e){var n=e.name;return{name:void 0===n?"":n,isAvatar:!1}}))),(0,u.Z)(s.map((function(e){return{isAvatar:!1,name:(null===e||void 0===e?void 0:e.metadata.fullPath)||""}})))).map((function(e,n){return{isAvatar:0===n,name:e.name}})),f=(0,i.Z)((0,i.Z)({},ie),{},{photos:l}),e.next=12,(0,g.pl)((0,g.JU)(_.sY,"profiles",L.current),f);case 12:return v=e.sent,console.log(v,l),e.next=16,Promise.all(l.map(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.name||"",e.next=3,(0,b.D)(t);case 3:return r=e.sent,e.abrupt("return",{link:r,name:t});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 16:if(d=e.sent){e.next=20;break}throw _e("Photos list is empty"),new Error("cant send Photos: ".concat(JSON.stringify(d)));case 20:h=(0,i.Z)((0,i.Z)({},ie),{},{photos:d.map((function(e,n){var t=e.link;return{isAvatar:0===n,name:e.name,link:t}}))}),M((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},L.current,h))})),(0,j.c_)(q);case 23:we(),he(!0),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(1),console.log(e.t0),_e("Error: "+e.t0.message);case 31:le(!1),D&&n.navigate("/");case 33:case"end":return e.stop()}}),e,null,[[1,27]])})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){L.current=P||(""+Date.now()).substring(4);var e=Y[P];if(D){if(A||!e)return;var n=e.name,t=void 0===n?"":n,r=e.birthday,i=void 0===r?0:r,u=e.children,c=void 0===u?0:u,s=e.city,l=void 0===s?"":s,f=e.country,v=void 0===f?"":f,d=e.job,h=void 0===d?"":d,m=e.marital,p=void 0===m?"":m,Z=e.photos,x=void 0===Z?[]:Z,g=e.etc,y=void 0===g?"":g,b=e.height,_=void 0===b?"":b,w=e.weight,k=void 0===w?"":w,C=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(x.sort((function(e,n){return e.isAvatar?-1:n.isAvatar?1:0})).map((function(e){return{link:e.link,name:e.name}}))),ue({name:t,birthday:i,children:c,marital:p,job:h,city:l,country:v,etc:y,height:_,weight:k}),e.next=4,(0,j._v)(0);case 4:xe(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();C()}else xe(!0),we()}),[n,A]),(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(v.Z,{sx:{py:5,overflow:"auto"},className:(0,f.Z)(se&&F,z),children:[(0,X.jsx)(d.Z,{sx:{mx:"auto",maxWidth:550},children:(0,X.jsx)(l.ZP,{onDrop:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n,t){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.Z)(n,90,"auto",900,"webp");case 2:return r=e.sent,i=r.size<n.size?new File([r],"".concat(t,".webp"),{type:"image/webp"}):n,e.abrupt("return",{file:i,link:URL.createObjectURL(i)});case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()));case 2:t=e.sent,K((function(e){return[].concat((0,u.Z)(e),(0,u.Z)(t))}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),onDragOver:function(){return je(!0)},onDragLeave:function(){return je(!1)},children:function(n){var t=n.getRootProps,r=n.getInputProps,a=t();return(0,X.jsxs)(h.Z,(0,i.Z)((0,i.Z)({variant:"outlined",sx:{p:5}},a),{},{ref:e,children:[(0,X.jsx)("input",(0,i.Z)({},r())),(0,X.jsx)("p",{className:I,children:"Add Photos"})]}))}})}),(0,X.jsx)(d.Z,{sx:{my:4},children:(0,X.jsx)("div",{className:O,children:U.map((function(e,n){return(0,X.jsx)("img",{src:e.link,alt:""+n,className:(0,f.Z)(0===n&&V),loading:"lazy",onClick:function(){var n=U.sort((function(n,t){return n.link===e.link?-1:t.link===e.link?1:0}));K((0,u.Z)(n))},onContextMenu:function(n){n.preventDefault();var t=U.filter((function(n){return n!==e}));K(t),D&&ee((function(n){return[].concat((0,u.Z)(n),[e.link])}))}})}))})}),Ze?(0,X.jsx)(ne,{state:ie,setState:ue}):null,(0,X.jsx)(m.Z,{sx:{m:"0 auto",display:"block",minWidth:200,p:1.5},variant:"contained",disabled:se||!ie.name||!U.length,onClick:ke,children:se?(0,X.jsx)(w.a,{size:25}):(0,X.jsx)("span",{children:"Send"})})]}),(0,X.jsx)(p.Z,{open:de||!!be,autoHideDuration:2e3,onClose:function(){_e(""),he(!1)},children:(0,X.jsx)(Z.Z,{icon:!1,severity:be?"error":"info",children:be||(0,X.jsxs)(d.Z,{children:[(0,X.jsx)("span",{className:B,children:"Profile created!"}),(0,X.jsx)("h1",{className:G,children:R.current.name}),(0,X.jsx)("img",{src:R.current.photo,alt:"avatar",className:H})]})})})]})},ae=(0,s.memo)(re)}}]);
//# sourceMappingURL=215.4f6710c7.chunk.js.map