"use strict";(self.webpackChunkdate=self.webpackChunkdate||[]).push([[921],{3921:function(e,n,r){r.r(n),r.d(n,{default:function(){return A}});var t=r(1413),a=r(5671),s=r(3144),c=r(136),i=r(7277),u=r(2791),o={},l=r(184),f=function(e){var n=e.message,r=e.title,t=e.cause,a=e.stack;return(0,l.jsxs)("div",{className:o.wrapper,children:[(0,l.jsx)("h1",{children:r}),(0,l.jsxs)("p",{children:["Error reason: ",n]}),(0,l.jsxs)("div",{className:o.stack,children:[(0,l.jsx)("span",{children:t}),(0,l.jsx)("span",{children:a})]}),(0,l.jsx)("button",{onClick:function(){return window.location.reload()},className:o.button,children:"Reload Page"})]})},h=r(4510),p=r(4270),d=r(3967),v=r(5473),x=r(4554),m=r(6151),Z=r(4395),g=r(1614),j=r(3044),y=r(8562),w=r(6871),k=(0,r(5697).ot)().pages,b=function(){var e=(0,y.hI)().page,n=(0,h.aC)().user;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(u.Suspense,{children:(0,l.jsx)(w.Z5,{location:e.path,children:k.map((function(e,r){var t=e.pathName,a=e.data,s=a.component,c=a.redirect,i=a.adminOnly,u=!s||c||!n&&!!i;return(0,l.jsx)(w.AW,{path:t,element:u?(0,l.jsx)(w.Fg,{to:c||"/"}):(0,l.jsx)(s,{})},"routes/".concat(t,"_").concat(r))}))})})})},C=r(885),P=[{text:"All Profiles",link:"/"},{text:"Favorites",link:"/favorites"}],S=function(){var e=(0,y.hI)().page,n=(0,h.aC)().user,r=(0,d.Z)(),t=(0,u.useRef)(null),a=function(){var e=(0,y.hI)().page,n=(0,h.aC)(),r=n.user,t=n.sightOut,a=(0,u.useState)(!1),s=(0,C.Z)(a,2),c=s[0],i=s[1],o=function(){return i(!1)};return{buttons:(0,u.useMemo)((function(){return[{text:"Add Profile",onClick:function(){e.navigate("/create"),o()}},{text:"Log Out",onClick:function(){t(),o()}}]}),[!!r]),isOpen:c,handleClose:o,handleOpen:function(){return i(!0)}}}(),s=a.isOpen,c=a.handleClose,i=a.handleOpen,o=a.buttons;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.q,{children:(0,l.jsx)("title",{children:"Date"})}),(0,l.jsx)(v.ZP,{open:s,onClose:c,anchorEl:t.current,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},sx:{mt:.5},children:(0,l.jsx)(x.Z,{sx:{display:"flex",flexDirection:"column"},children:o.map((function(e){var n=e.onClick,r=e.text;return(0,l.jsx)(m.Z,{sx:{py:1,px:2},onClick:n,children:r})}))})}),(0,l.jsx)(Z.Z,{position:"fixed",children:(0,l.jsx)(g.Z,{maxWidth:"lg",sx:{mx:"auto"},children:(0,l.jsxs)(x.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsx)(x.Z,{children:P.map((function(n){var r=n.link,t=n.text;return(0,l.jsx)(m.Z,{onClick:function(){return e.navigate(r)},sx:{my:0,color:"white",height:50,borderRadius:0,textTransform:"capitalize"},children:t})}))}),n&&(0,l.jsx)(m.Z,{onClick:i,children:(0,l.jsx)(j.Z,{ref:t,sx:{width:35,height:35,bgcolor:"#0099ff"},children:"A"})})]})})}),(0,l.jsx)(g.Z,{sx:{py:2,minHeight:"100vh",mt:5,bgcolor:r.palette.secondary.main},maxWidth:"lg",children:(0,l.jsx)(b,{})})]})},O=function(e){(0,c.Z)(r,e);var n=(0,i.Z)(r);function r(){var e;(0,a.Z)(this,r);for(var t=arguments.length,s=new Array(t),c=0;c<t;c++)s[c]=arguments[c];return(e=n.call.apply(n,[this].concat(s))).state={},e}return(0,s.Z)(r,[{key:"componentDidCatch",value:function(e,n){console.error(e,n),this.setState({error:{title:e.name,message:e.message,stack:e.stack,cause:e.cause}})}},{key:"render",value:function(){var e=this.state.error;return(0,l.jsx)(u.Suspense,{fallback:null,children:e?(0,l.jsx)(f,(0,t.Z)({},e)):(0,l.jsx)(h.ZP,{children:(0,l.jsx)(S,{})})})}}]),r}(u.Component),A=O},4510:function(e,n,r){r.d(n,{ZP:function(){return H},aC:function(){return m},nw:function(){return S}});var t=r(3504),a=r(8562),s=r(6249),c=r(885),i=r(4165),u=r(5861),o=r(2791),l=r(8791),f=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(n,r){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.e5)(d,n,r);case 3:return t=e.sent,e.abrupt("return",t.user);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,r){return e.apply(this,arguments)}}(),h=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.w7)(d);case 2:return e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=r(184),d=(0,l.v0)(),v=(0,o.createContext)({sighIn:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sightOut:function(){},user:null}),x=function(e){var n=e.children,r=(0,o.useState)(d.currentUser),t=(0,c.Z)(r,2),a=t[0],s=t[1];return(0,o.useEffect)((function(){d.onAuthStateChanged((function(e){s(e)}))}),[]),(0,p.jsx)(v.Provider,{value:{user:a,sighIn:f,sightOut:h},children:n})},m=function(){return(0,o.useContext)(v)},Z=r(7762),g=r(1413),j=r(2481),y=r(9398),w=r(7686),k=r(3543),b=r(4070),C=(0,o.createContext)({profiles:{},setProfiles:function(){},removeProfile:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),loading:!1,favorites:{},changeFavorites:function(){}}),P=function(e){var n=e.children,r=(0,o.useState)({}),t=(0,c.Z)(r,2),a=t[0],l=t[1],f=(0,o.useState)(!0),h=(0,c.Z)(f,2),d=h[0],v=h[1],x=(0,o.useState)({isOpen:!1,severity:"success"}),m=(0,c.Z)(x,2),P=m[0],S=m[1],O=(0,o.useState)({}),A=(0,c.Z)(O,2),I=A[0],E=A[1];(0,o.useEffect)((function(){var e=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){var n,r,t,a,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.prev=1,n=(0,j.IO)((0,j.hJ)(s.sY,"profiles")),e.next=5,(0,j.PL)(n);case 5:return r=e.sent,e.next=8,new Promise((function(e,n){var t={},a=r.size,s=0;r.forEach(function(){var n=(0,u.Z)((0,i.Z)().mark((function n(r){var c,u,o,l,f,h,p,d,v;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c=r.data(),u=r.id,o=[],l=(0,Z.Z)(c.photos),n.prev=4,l.s();case 6:if((f=l.n()).done){n.next=15;break}return h=f.value,p=h.isAvatar,d=h.name,n.next=11,(0,y.D)(h.name);case 11:v=n.sent,o.push({isAvatar:p,link:v,name:d});case 13:n.next=6;break;case 15:n.next=20;break;case 17:n.prev=17,n.t0=n.catch(4),l.e(n.t0);case 20:return n.prev=20,l.f(),n.finish(20);case 23:t[u]=(0,g.Z)((0,g.Z)({},c),{},{photos:o}),++s===a&&e(t);case 25:case"end":return n.stop()}}),n,null,[[4,17,20,23]])})));return function(e){return n.apply(this,arguments)}}()),s===a&&e(t)}));case 8:t=e.sent,l(t);try{(a=localStorage.getItem("favorites"))&&(c=JSON.parse(a),E(c.reduce((function(e,n){return e[n]=n,e}),{})))}catch(o){console.error("Something went wrong",o)}e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error("Something went wrong",e.t0);case 16:v(!1);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var F=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a[n],l((function(e){return delete e[n],(0,g.Z)({},e)})),e.next=4,(0,w.Z7)(n,r);case 4:if(!e.sent){e.next=10;break}return S({isOpen:!0,severity:"success"}),e.abrupt("return",!0);case 10:return S({isOpen:!0,severity:"error"}),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(C.Provider,{value:{profiles:a,setProfiles:l,removeProfile:F,loading:d,favorites:I,changeFavorites:function(e){E((function(n){!!n[e]?delete n[e]:n[e]=e;try{var r=Object.keys(n);localStorage.setItem("favorites",JSON.stringify(r))}catch(t){console.error(t)}return(0,g.Z)({},n)}))}},children:n}),(0,p.jsx)(k.Z,{open:P.isOpen,onClose:function(){return S((function(e){return(0,g.Z)((0,g.Z)({},e),{},{isOpen:!1})}))},autoHideDuration:2e3,children:(0,p.jsx)(b.Z,{variant:"filled",severity:P.severity,children:"success"===P.severity?"Successfully deleted!":"Something went wrong"})})]})},S=function(){return(0,o.useContext)(C)},O=r(7107),A=r(5231),I=(0,O.Z)({palette:{primary:{main:"#593196"},secondary:{main:"#ded6ea"},success:{main:"#13b955"},warning:{main:"#efa31d"},info:{main:"#00a1d7"},error:{main:"#93000a"}}}),E=function(e){var n=e.children;return(0,p.jsx)(A.Z,{theme:I,children:n})},F=!!s.oY,H=function(e){var n=e.children;return F?(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(E,{children:(0,p.jsx)(t.UT,{children:(0,p.jsx)(a.v3,{children:(0,p.jsx)(x,{children:(0,p.jsx)(P,{children:(0,p.jsx)(p.Fragment,{children:n})})})})})})}):null}},8562:function(e,n,r){r.d(n,{v3:function(){return d},hI:function(){return v}});var t=r(2791),a={page:{path:"",navigate:function(){},isHavePrevHistory:!1},searchParams:{params:{},change:function(){},clear:function(){},delete:function(){}},defaultLocation:{hash:"",key:"",pathname:"",search:"",state:{}}},s=t.createContext(a),c=r(7762),i=r(1413),u=r(885),o=r(6871),l=/^\/{2,}/g,f=/\/*$/g,h=function(e,n){var r=new URLSearchParams(n.search);return Object.entries(e).forEach((function(e){var n=(0,u.Z)(e,2),t=n[0],a=n[1];"string"===typeof a?r.set(t,a):a.forEach((function(e){return r.append(t,e)}))})),r},p=r(184),d=function(e){var n=e.children,r=(0,o.s0)(),a=(0,o.TH)(),d=function(){var e=a.pathname.split("/modal/");return{pagePath:(0,u.Z)(e,1)[0]||"/"}},v=(0,t.useState)((0,i.Z)((0,i.Z)({},d()),{},{searchParams:{}})),x=(0,u.Z)(v,2),m=x[0],Z=x[1];(0,t.useEffect)((function(){Z((function(e){return(0,i.Z)((0,i.Z)({},e),d())}))}),[a.pathname]),(0,t.useEffect)((function(){var e,n=new URLSearchParams(a.search).entries(),r={},t=(0,c.Z)(n);try{for(t.s();!(e=t.n()).done;){var s=(0,u.Z)(e.value,2),o=s[0],l=s[1],f=r[o];f?f.push(l):r[o]=[l]}}catch(h){t.e(h)}finally{t.f()}Z((function(e){return(0,i.Z)((0,i.Z)({},e),{},{searchParams:r})}))}),[a.search]);return(0,p.jsx)(s.Provider,{value:{page:{path:m.pagePath,navigate:function(e,n){a.pathname!==e&&("string"===typeof e?r(e.replaceAll(l,"/").replaceAll(f,""),n):"default"===a.key?r("/",n):r(e,n))},isHavePrevHistory:"default"!==a.key},searchParams:{params:m.searchParams,change:function(e){r({pathname:a.pathname,search:h(e,a).toString()})},delete:function(e){var n=new URLSearchParams(a.search);n.delete(e),r({pathname:a.pathname,search:n.toString()})},clear:function(){r({pathname:a.pathname,search:""})}},defaultLocation:a},children:n})},v=function(){return(0,t.useContext)(s)}},9398:function(e,n,r){r.d(n,{D:function(){return i}});var t=r(4165),a=r(5861),s=r(6249),c=r(276),i=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=(0,c.iH)(s.hu,n),e.next=4,(0,c.Jt)(r);case 4:return a=e.sent,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),console.log("Can't download photo: ",n,e.t0),e.abrupt("return","");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=921.48f27fd0.chunk.js.map